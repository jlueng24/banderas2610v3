<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>Diversión con el mundo</title>
  <meta name="theme-color" content="#0ea5e9" />
  <link id="manifestLink" rel="manifest" />
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    :root{ --tap: 44px; }
    html,body{height:100%}
    .app-frame{min-height:100dvh}
    .hide-scrollbar::-webkit-scrollbar{display:none}
    .hide-scrollbar{-ms-overflow-style:none;scrollbar-width:none}
    .screen{display:none}
    .screen.active{display:block}
    .answer-btn{transition:transform .06s ease, box-shadow .12s ease}
    .answer-btn:active{transform:translateY(1px) scale(.99)}
    .flag-img{object-fit:contain;object-position:center}
    .kbd{border:1px solid rgb(203 213 225); border-bottom-width:3px; padding:.15rem .45rem; border-radius:.375rem; font-size:.75rem}
    .btn-ico{display:flex; align-items:center; gap:.5rem}
    .bar{height:8px;border-radius:9999px;overflow:hidden;background:#e2e8f0}
    .bar>span{display:block;height:100%;border-radius:9999px;background:linear-gradient(90deg,#0ea5e9,#10b981)}

    /* Pokédex album effects */
    .shine{position:relative;overflow:hidden}
    .shine:after{content:"";position:absolute;inset:-100% auto -100% -100%;width:60%;transform:rotate(25deg);
      background:linear-gradient(90deg,transparent,rgba(255,255,255,.45),transparent);animation:shine 2.4s ease-in-out infinite}
    @keyframes shine{0%{left:-100%}100%{left:200%}}
    .flip{perspective:1000px}
    .flip-inner{transition:transform .6s;transform-style:preserve-3d}
    .flip:hover .flip-inner{transform:rotateY(180deg)}
    .flip-face{backface-visibility:hidden}
    .flip-back{transform:rotateY(180deg)}
    .badge-pulse{animation:pulse 1.8s ease-in-out infinite}
    @keyframes pulse{0%,100%{transform:scale(1)}50%{transform:scale(1.06)}}

    @media (max-width: 640px){
      .hud-wrap{gap:.5rem}
      .hud-time{width:9rem}
      .answer-btn{padding-block:.9rem}
    }

    /* ===== Sala de logros (visual base) ===== */
    .achv-card { position:relative; border-radius:16px; padding:10px; background:#fff; border:1px solid #e5e7eb; cursor:pointer; transition:transform .15s ease, box-shadow .15s ease; }
    .achv-card:hover { transform: translateY(-2px); box-shadow: 0 10px 24px rgba(2,8,23,.08); }
    .achv-art { width:72px; height:72px; border-radius:50%; display:grid; place-items:center; margin:0 auto 8px; background:linear-gradient(180deg,#f8fafc,#eef2f7); border:1px solid #e5e7eb; box-shadow: inset 0 0 0 6px rgba(255,255,255,.7); }
    .achv-title { font-weight:600; font-size:12px; line-height:1.1; text-align:center; }
    .achv-cat { font-size:10px; color:#64748b; text-align:center; margin-top:2px; }

    .achv-locked .achv-art { filter:grayscale(1) contrast(.9) opacity(.7); position:relative; }
    .achv-locked .achv-art:after { content:"🔒"; position:absolute; font-size:18px; transform:translate(22px,-22px); }
    .achv-locked .achv-title { color:#94a3b8; }

    .achv-unlocked .achv-art { box-shadow: inset 0 0 0 6px rgba(255,255,255,.85), 0 0 0 2px rgba(16,185,129,.35), 0 10px 24px rgba(5,150,105,.15); }

    .achv-rare .achv-art { position:relative; }
    .achv-rare .achv-art:before {
      content:""; position:absolute; inset:-6px; border-radius:50%;
      box-shadow: 0 0 0 6px rgba(234,179,8,.25);
      animation: achvHalo 2.6s ease-in-out infinite; opacity:.25;
    }
    @keyframes achvHalo { 0%,100%{opacity:.2} 50%{opacity:.4} }

    .drawer-open #achievementDrawer { transform: translateX(0); }
  </style>
</head>
<body class="bg-slate-50 text-slate-800">
  <!-- Top bar -->
  <header class="sticky top-0 z-50 bg-white/90 backdrop-blur border-b">
    <div class="max-w-6xl mx-auto px-3 sm:px-4 py-2 sm:py-3 flex items-center justify-between gap-2">
      <div class="flex items-center gap-2 sm:gap-3 min-w-0">
        <span class="inline-flex items-center justify-center w-9 h-9 rounded-xl bg-sky-600 text-white text-xl shrink-0">🌐</span>
        <div class="min-w-0">
          <h1 class="text-base sm:text-lg font-bold leading-tight truncate">Diversión con el mundo</h1>
          <div class="text-[11px] text-slate-500 hidden sm:block">Diversión con el mundo</div>
        </div>
      </div>
      <div class="flex items-center gap-1 sm:gap-2">
        <button id="btnFullscreen" type="button" class="px-3 py-1.5 rounded-xl bg-sky-600 hover:bg-sky-700 text-white text-xs sm:text-sm font-semibold" aria-label="Pantalla completa">Pantalla completa</button>
        <button id="btnInstall" type="button" class="px-3 py-1.5 rounded-xl bg-slate-200 text-slate-500 text-xs sm:text-sm font-semibold cursor-not-allowed" title="Instalar">Instalar</button>
        <button id="btnMute" type="button" class="px-3 py-1.5 rounded-xl bg-white border text-xs sm:text-sm font-semibold min-w-[var(--tap)]" aria-pressed="false" aria-label="Silenciar/activar sonido">🔊</button>
      </div>
    </div>
  </header>

  <main class="max-w-6xl mx-auto p-2 sm:p-6 app-frame">
    <div class="rounded-3xl bg-white shadow-sm ring-1 ring-slate-200 p-2 sm:p-6">
      <div id="APP" class="hide-scrollbar">
        <div class="max-w-5xl mx-auto p-2 sm:p-4">
          <!-- (contenido igual que antes) -->
          <!-- ... TODA TU APP ... -->
        </div>

        <!-- IMPORTANTE: achievements.js antes que la app, y con ?v= para evitar caché -->
        <script src="./achievements.js?v=2610"></script>
        <!-- Usa el archivo parcheado. Si lo renombraste a app.js, cambia esta línea a ./app.js?v=2610 -->
        <script src="./app_patched_logros_excel_v2.js?v=2610"></script>
      </div>
    </div>
  </main>

  <footer class="max-w-6xl mx-auto px-3 sm:px-4 py-4 sm:py-6 text-center text-[11px] sm:text-xs text-slate-500">
    Optimizado para móvil, tablet y escritorio. Añádelo a pantalla de inicio cuando lo subas a Internet.
  </footer>

  <!-- Fullscreen / Manifest -->
  <script>
    (function(){
      const fs = document.documentElement;
      const btnFs = document.getElementById('btnFullscreen');
      if (btnFs) btnFs.addEventListener('click', async () => {
        try { if (!document.fullscreenElement) await fs.requestFullscreen(); else await document.exitFullscreen(); } catch(e) {}
      });
    })();

    (function(){
      const manifest = {
        name: "Diversión con el mundo",
        short_name: "Mundo",
        description: "Diversión con el mundo",
        start_url: "./index.html",
        scope: "./",
        display: "standalone",
        background_color: "#ffffff",
        theme_color: "#0ea5e9",
        icons: [
          { src: "data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='512' height='512'><rect width='512' height='512' fill='%230ea5e9'/><text x='50%' y='56%' font-size='250' text-anchor='middle' fill='white'>🌐</text></svg>", sizes: "512x512", type: "image/svg+xml" },
          { src: "data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='192' height='192'><rect width='192' height='192' fill='%230ea5e9'/><text x='50%' y='58%' font-size='110' text-anchor='middle' fill='white'>🌐</text></svg>", sizes: "192x192", type: "image/svg+xml" }
        ]
      };
      const blob = new Blob([JSON.stringify(manifest)], {type: 'application/manifest+json'});
      const url = URL.createObjectURL(blob);
      document.getElementById('manifestLink').setAttribute('href', url);
    })();
  </script>
  
</body>
</html>
